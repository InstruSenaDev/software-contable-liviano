import"./hoisted.ll0w3Ecl.js";import{u as B}from"./formatoFH.CMS0xWzF.js";function f(){let e=!0;console.log("Iniciando validación del formulario");const r=document.getElementById("nombre"),s=document.getElementById("tipo-documento"),c=document.getElementById("numero-documento"),l=document.getElementById("numero-telefono"),m=document.getElementById("correo-electronico"),u=document.getElementById("direccion"),i=document.getElementById("encargado"),t=document.getElementById("error-nombre"),n=document.getElementById("error-tipo-documento"),o=document.getElementById("error-numero-documento"),d=document.getElementById("error-numero-telefono"),g=document.getElementById("error-correo-electronico"),v=document.getElementById("error-direccion"),a=document.getElementById("error-encargado"),I=/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s.;,:-_$(#*)]+$/,y=/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]+$/;return t.classList.add("hidden"),n.classList.add("hidden"),o.classList.add("hidden"),d.classList.add("hidden"),g.classList.add("hidden"),v.classList.add("hidden"),a.classList.add("hidden"),r.value.trim()===""?(t.textContent="El nombre es obligatorio.",t.classList.remove("hidden"),e=!1):I.test(r)||(t.textContent="el nombre no debe contener numeros",t.classList.remove("hidden"),e=!1),s.value===""&&(n.textContent="Seleccione un tipo de documento.",n.classList.remove("hidden"),e=!1),c.value.trim()===""?(o.textContent="El número de documento es obligatorio.",o.classList.remove("hidden"),e=!1):s.value==="2"&&!/^\d{9,12}-\d$/.test(c.value)&&(o.textContent="El NIT debe tener el formato válido: 00000000000-0.",o.classList.remove("hidden"),e=!1),(l.value.trim()===""||!/^\d{10}$/.test(l.value))&&(d.textContent="El número de teléfono debe tener 10 dígitos numéricos.",d.classList.remove("hidden"),e=!1),(m.value.trim()===""||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m.value))&&(g.textContent="Ingrese un correo electrónico válido.",g.classList.remove("hidden"),e=!1),u.value.trim()===""&&(v.textContent="La dirección es obligatoria.",v.classList.remove("hidden"),e=!1),i.value.trim()===""?(a.textContent="El encargado es obligatorio.",a.classList.remove("hidden"),e=!1):y.test(i.value)||(a.textContent="El nombre no debe contener caracteres especiales.",a.classList.remove("hidden"),e=!1),console.log("Validación completada:",e),e}async function E(){const e=document.getElementById("nombre").value,r=document.getElementById("numero-documento").value,s=document.getElementById("tipo-documento").value,c=document.getElementById("numero-telefono").value,l=document.getElementById("correo-electronico").value,m=document.getElementById("direccion").value,u=document.getElementById("encargado").value,i=document.getElementById("fecha").textContent,t=document.getElementById("hora").textContent,n=localStorage.getItem("userId");console.log("Datos a enviar:",{nombre:e,numero_documento:r,tipo_documento:s,numero_telefono:c,correo_electronico:l,direccion:m,encargado:u,fecha:i,hora:t,userId:n});try{const d=await(await fetch("http://localhost:8080/registerProviders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:e,numero_documento:r,tipo_documento:s,numero_telefono:c,correo_electronico:l,direccion:m,encargado:u,fecha:i,hora:t,userId:n})})).json();console.log("Respuesta del servidor:",d),d.success?(document.getElementById("modal-successx").classList.remove("hidden"),setTimeout(()=>{document.getElementById("modal-successx").classList.add("hidden")},2e3),document.getElementById("formProviders").reset()):(document.getElementById("modal-errorx").classList.remove("hidden"),setTimeout(()=>{document.getElementById("modal-errorx").classList.add("hidden")},2e3))}catch(o){console.error("Error al enviar el formulario:",o),document.getElementById("modal-errorx").classList.remove("hidden"),setTimeout(()=>{document.getElementById("modal-errorx ").classList.add("hidden")},2e3)}}document.getElementById("formProviders").addEventListener("submit",function(e){e.preventDefault(),f()&&E()});document.getElementById("formProviders").addEventListener("submit",function(e){e.preventDefault(),E()});document.addEventListener("DOMContentLoaded",()=>{B()});document.getElementById("submit").addEventListener("click",()=>{f()});document.getElementById("submit").addEventListener("click",()=>{E()});
