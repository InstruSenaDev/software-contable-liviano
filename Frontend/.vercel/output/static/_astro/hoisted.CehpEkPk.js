import"./hoisted.ll0w3Ecl.js";document.addEventListener("DOMContentLoaded",()=>{const m=document.getElementById("btnDelete"),r=document.getElementById("deleteModal"),u=document.getElementById("closeModal"),h=document.getElementById("deleteUsuario"),n=document.getElementById("documentInput"),o=document.getElementById("errorMsg"),l=document.getElementById("searchInput"),d=document.querySelector("#adminTable tbody"),c=t=>{const e=document.getElementById(t);e&&(e.classList.remove("hidden"),setTimeout(()=>{e.classList.add("hidden")},3e3))},y=async()=>{try{const t=await fetch("http://localhost:8080/usuarios");if(!t.ok)throw new Error("Network response was not ok");const e=await t.json();return console.log("Users fetched:",e),e.filter(s=>s.estado==="activo")}catch(t){return console.error("Error al obtener los datos:",t),[]}},i=async()=>{const t=await y();console.log("Filtered users:",t),d.innerHTML="",t.forEach(e=>{const s=e.idrol===1?"superadmin":"administrador",a=`
          <tr key="${e.idusuario}" class="border-b">
            <td class="p-2">${e.nombre}</td>
            <td class="p-2">${e.apellido}</td>
            <td class="p-2">${e.correo}</td>
            <td class="p-2">${s}</td>
          </tr>
        `;d.insertAdjacentHTML("beforeend",a)})},p=()=>{const t=l.value.toLowerCase();Array.from(d.rows).forEach(e=>{const a=Array.from(e.cells).some(L=>L.textContent.toLowerCase().includes(t));e.style.display=a?"":"none"})};m.addEventListener("click",()=>{r.classList.remove("hidden")}),u.addEventListener("click",()=>{r.classList.add("hidden"),n.value="",o.classList.add("hidden")}),h.addEventListener("click",async()=>{const t=n.value.trim();if(!t){o.textContent="Por favor, ingrese un correo electr√≥nico.",o.classList.remove("hidden");return}try{const e=await fetch("http://localhost:8080/eliminarUsuario",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({correo:t})});if(e.ok)c("modal-successxxz"),r.classList.add("hidden"),n.value="",o.classList.add("hidden"),await i();else{const s=await e.json();o.textContent=s.error||"Administrador no encontrado.",o.classList.remove("hidden"),c("modal-errorxxz")}}catch(e){console.error("Error al eliminar proveedor:",e),o.textContent="Error al procesar la solicitud.",o.classList.remove("hidden"),c("modal-errorxxz")}}),l.addEventListener("input",p),i()});
